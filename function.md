# å‡½æ•°

## å‡½æ•°åˆ†ç±»

##### å­—ç¬¦ä¸²å‡½æ•°

- è¯­æ³•
  - select å‡½æ•°ï¼ˆå‚æ•°å­—ç¬¦ä¸²ï¼‰
- å¸¸ç”¨åˆé›†
  | **å‡½æ•°** | **åŠŸèƒ½** |
  | --- | --- |
  | concat(s1,s2,...sn) | å­—ç¬¦ä¸²æ‹¼æ¥ |
  | lower(s) | è½¬å°å†™ |
  | upper(s) | è½¬å¤§å†™ |
  | lpad(s,n,pad) | å·¦å¡«å……ï¼Œç”¨å­—ç¬¦ä¸² pad å¯¹ str è¿›è¡Œå·¦å¡«å……ï¼Œè¾¾åˆ° n ä¸ªå­—ç¬¦é•¿åº¦ |
  | rpad(s,n,pad) | å³å¡«å……ï¼Œç”¨å­—ç¬¦ä¸² pad å¯¹ str è¿›è¡Œå³å¡«å……ï¼Œè¾¾åˆ° n ä¸ªå­—ç¬¦é•¿åº¦ |
  | trim(s) | å»æ‰å­—ç¬¦ä¸²é¦–å°¾çš„ç©ºæ ¼ |
  | substring(s,start,len) | è¿”å› s ä» start èµ· len é•¿åº¦çš„å­—ç¬¦ä¸²
  æ³¨æ„ âš ï¸ï¼š1 å°±æ˜¯å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä½ï¼Œå’Œè¯­è¨€çš„ç¬¬ä¸€ä½æ˜¯ 0 ä¸åŒ |

- ğŸŒ°
  - å·¥å·è¡¥é›¶
  - update user set workid=lpad(workid,5,'0');

##### æ•°å€¼å‡½æ•°

- è¯­æ³•
  - select å‡½æ•°ï¼ˆå‚æ•°å­—ç¬¦ä¸²ï¼‰
- å¸¸ç”¨åˆé›†
  | **å‡½æ•°** | **åŠŸèƒ½** |
  | --- | --- |
  | ceil(num) | å‘ä¸Šå–è¯ |
  | floor(num) | å‘ä¸‹å–è¯ |
  | mod(x,y) | å– x/y çš„ä½™æ•° |
  | rand() | è¿”å› 0-1 å†…çš„éšæœºæ•° |
  | round(x,y) | æ±‚å‚æ•° x å››èˆäº”å…¥çš„å€¼ï¼Œä¿ç•™ y å‘³çš„å°æ•° |

- ğŸŒ°
  - select lpad(round(rand()\*1000000,0),6,'0');

##### æ—¥æœŸå‡½æ•°

- è¯­æ³•
  - select å‡½æ•°ï¼ˆå‚æ•°å­—ç¬¦ä¸²ï¼‰
- å¸¸ç”¨é›†åˆ
  | **å‡½æ•°** | **åŠŸèƒ½** |
  | --- | --- |
  | curdate() | å½“å‰æ—¥æœŸ yyyy-mm-dd |
  | curtime() | å½“å‰æ—¶é—´ hh:mm:ss |
  | now() | å½“å‰æ—¥æœŸå’Œæ—¶é—´ yyyy-mm-dd hh:mm:ss |
  | year(date) | æŒ‡å®š date å¹´ä»½ yyyy |
  | month(date) | æŒ‡å®š date æœˆä»½ mm |
  | day(date) | æŒ‡å®š date çš„æ—¥æœŸ dd |
  | date_add(date,interval expr type) | æ—¥æœŸ/æ—¶é—´å€¼ date åŠ ä¸Šæ—¶é—´é—´éš” expr åçš„æ—¶é—´å€¼ï¼Œtype è¡¨ç¤ºæ—¶é—´çš„ç±»å‹ï¼Œä¾‹å¦‚ year |
  | datediff(date1,date2) | èµ·å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ä¹‹é—´çš„å¤©æ•°ï¼Œdate1-date2 å­˜åœ¨è´Ÿæ•°çš„æƒ…å†µ |

- ğŸŒ°
  - æŸ¥è¯¢å…¥èŒå‘˜å·¥çš„å¤©æ•°ï¼Œå¹¶è¿›è¡Œå€’åº
    - select name, datediff(curdate(), entrydate) as entrydays from user order by entrydays desc;

##### æµç¨‹å‡½æ•°

- ä½œç”¨
  - æ¡ä»¶ç­›é€‰
  - æŸ¥è¯¢çš„å­—æ®µåšé€»è¾‘å¤„ç†
- è¯­æ³•
  - select å‡½æ•°ï¼ˆå‚æ•°å­—ç¬¦ä¸²ï¼‰
- å¸¸ç”¨é›†åˆ
  | **å‡½æ•°** | **åŠŸèƒ½** |
  | --- | --- |
  | if(value,t,f) | ç±»ä¼¼ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œvalue ä¸º trueï¼Œè¿”å› t å¦åˆ™è¿”å› f |
  | ifnull(value1, value2) | å¦‚æœ value1 ä¸ä¸ºç©ºè¿”å› value1ï¼Œä¸ºç©ºè¿”å› value2
  ä¸ä¸ºç©ºå‡†ç¡®æ¥è¯´æ˜¯ä¸è¿”å› null |
  | case when [val1] then [res1] ...else [default] end | å¦‚æœ val1 ä¸º trueï¼Œè¿”å› res1ï¼Œ...å¦åˆ™è¿”å› default é»˜è®¤å€¼ |
  | case [expr] when [val1] then [res1] ...else [default] end | å¦‚æœ expr çš„å€¼ç­‰äº val1ï¼Œè¿”å› res1ï¼Œ...å¦åˆ™è¿”å› default é»˜è®¤å€¼ |

- ğŸŒ°
  - æŸ¥è¯¢å­¦ç”Ÿçš„åˆ†æ•°å¹¶æ ¹æ®åˆ†æ•°è¿”å›ä¼˜ç§€ã€åŠæ ¼ã€ä¸åŠæ ¼
    - select id,name,case when math>=90 then 'ä¼˜ç§€' else 'ä¸åŠæ ¼' end 'æ•°å­¦' form score;
